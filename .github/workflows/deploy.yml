name: Vercel deploy development
on:
  push:
    branches: [development]
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: "Checkout source code"
        uses: actions/checkout@v2

      - name: "Setup node version"
        uses: actions/setup-node@v2
        with:
          node-version: "14"
          # cache: 'npm'

      - name: "Cleanup"
        uses: colpal/actions-clean@v1
        if: ${{ always() }} # To ensure this step runs even when earlier steps fail


      # - name: "Cache update"
      #   uses: actions/cache@v2
      #   with:
      #     path: ${{ github.workspace }}/.next/cache
      #     # Generate a new cache whenever packages or source files change.
      #     key: ${{ runner.os }}-nextjs-${{ hashFiles('**/package-lock.json') }}-${{ hashFiles('**.[jt]s', '**.[jt]sx') }}
      #     # If source files changed but packages didn't, rebuild from a prior cache.
      #     restore-keys: |
      #       ${{ runner.os }}-nextjs-${{ hashFiles('**/package-lock.json') }}-

      # - name: "Build site"
      #   run: |
      #     npm ci
      #     npm run test:ci

      # - name: "Deploy to vercel"
      #   uses: amondnet/vercel-action@v20
      #   with:
      #     vercel-token: ${{ secrets.VERCEL_TOKEN }} # Required
      #     # github-token: ${{ secrets.GITHUB_TOKEN }} #Optional
      #     vercel-args: "--prod" #Optional
      #     vercel-org-id: ${{ secrets.ORG_ID}} #Required
      #     vercel-project-id: ${{ secrets.PROJECT_ID}} #Required
      #     # working-directory: ./public
